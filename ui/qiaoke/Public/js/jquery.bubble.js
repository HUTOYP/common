!function(t,e){function i(e,i){this.element=t(e),this.options=t.extend({},b,i),this.inited=!1,this._defaults=b,this._name=o,this.init()}var o="Bubble",n=e.document,s=["destroy","refresh"],b={ns:"",type:"click",position:"tl",content:"",offset:!1,size:"medium",theme:"inverse",close:!0,zindex:10,margin:0,width:"auto"};i.prototype.init=function(){var i=this;"hover"===i.options.type?i.element.bind("mouseenter",function(){i.inited||i.preinit(),i.content(function(){i.show()})}).bind("mouseleave",function(){i.bubble.removeAttr("data-active"),e.setTimeout(function(){i.inited&&!i.bubble.attr("data-active")&&i.hide()},200)}):i.element.bind(i.options.type,function(t){i.inited||i.preinit(),i.content(function(){i.show()}),"click"===i.options.type&&t.stopPropagation()}),t(n).bind("click",function(){i.inited&&i.bubble.attr("data-active")&&i.hide()})},i.prototype.preinit=function(){var e=this,i=e.options.offset?t("body"):e.element.offsetParent();return e.bubble=t('<div class="bubbles bubbles-hide"><em class="bubble-arrow"></em><i class="bubble-arrow"></i><table><tr><td class="bubble-content"><i class="bubble-loading loadingui-a"></i></td></tr></table></div>').css("z-index",e.options.zindex).appendTo(i),"auto"!==e.options.width&&e.bubble.css("width",e.options.width),e.bubbleContent=e.bubble.find(".bubble-content"),e.bubbleArrow=e.bubble.children("em.bubble-arrow"),e.bubble.addClass("bubbles-"+e.options.theme).addClass("bubbles-"+e.options.size).addClass("bubbles-"+e.options.position).addClass("bubbles-"+e.options.theme+"-"+e.options.position).addClass("bubbles-"+e.options.size+"-"+e.options.position).bind("mouseenter",function(){t(this).attr("data-active",!0)}).bind("mouseleave",function(){"hover"===e.options.type&&e.hide()}).bind("click",function(t){t.stopPropagation()}),e.options.close&&(e.bubbleClose=t('<em class="bubble-close">&times;</em>').appendTo(e.bubble),e.bubbleClose.bind("click",function(){e.hide(),"function"==typeof e.options.close&&e.options.close.call(e)})),e.options.ns&&e.bubble.attr("data-bubble-ns",e.options.ns),e.inited=!0,e},i.prototype.content=function(){var e,i,o,n,s,b=this;for(o=0;o<arguments.length;o++)"function"==typeof arguments[o]?i=arguments[o]:e=arguments[o];return e||(e=b.options.content),"object"==typeof e?(n=t.extend({type:"get",cache:!1},e),s=n.success,n.success=function(t){s?s(t,function(t){b.options.content=t,b.bubbleContent.html(t),b.position(),i&&i.call(b)}):(b.bubbleContent.html(t),b.position(),i&&i.call(b))},t.ajax(n)):"string"==typeof e&&(b.bubbleContent.html(e),b.position(),i&&i.call(b)),b},i.prototype.position=function(t){var e=this,i=e.options.offset?e.element.offset():e.element.position(),o=function(t,e){return parseInt(t.css(e).replace(/[^\d\.]/gi,"")||"0")},n={size:{width:e.element.outerWidth(),height:e.element.outerHeight()},margin:{top:o(e.element,"margin-top"),right:o(e.element,"margin-right"),bottom:o(e.element,"margin-bottom"),left:o(e.element,"margin-left")}},s={size:{width:e.bubble.outerWidth(),height:e.bubble.outerHeight()},border:{width:o(e.bubble,"border-left-width")}},b={size:{width:e.bubbleArrow.outerWidth(),height:e.bubbleArrow.outerHeight()},position:{top:o(e.bubbleArrow,"top"),bottom:o(e.bubbleArrow,"bottom"),left:o(e.bubbleArrow,"left"),right:o(e.bubbleArrow,"right")}};switch(t||(t=e.options.position),t){case"lb":e.bubble.css({left:i.left-s.size.width-b.size.width/2+n.margin.left-e.options.margin,top:i.top+n.size.height/2-b.position.top-b.size.height/2-s.border.width+n.margin.top});break;case"lt":e.bubble.css({left:i.left-s.size.width-b.size.width/2+n.margin.left-e.options.margin,top:i.top+n.size.height/2-s.size.height+b.position.bottom+s.border.width+b.size.height/2+n.margin.top});break;case"rb":e.bubble.css({left:i.left+n.size.width+b.size.width/2+n.margin.left+e.options.margin,top:i.top+n.size.height/2-b.position.top-b.size.height/2-s.border.width+n.margin.top});break;case"rt":e.bubble.css({left:i.left+n.size.width+b.size.width/2+n.margin.left+e.options.margin,top:i.top+n.size.height/2-s.size.height+b.position.bottom+s.border.width+b.size.height/2+n.margin.top});break;case"tr":e.bubble.css({left:i.left+n.size.width/2-s.border.width-b.position.left-b.size.width/2+n.margin.left,top:i.top-s.size.height-b.size.height/2+n.margin.top-e.options.margin});break;case"tl":e.bubble.css({left:i.left+n.size.width/2-s.size.width+b.position.right+s.border.width+b.size.width/2+n.margin.left,top:i.top-s.size.height-b.size.height/2+n.margin.top-e.options.margin});break;case"bl":e.bubble.css({left:i.left+n.size.width/2-s.size.width+b.position.right+s.border.width+b.size.width/2+n.margin.left,top:i.top+n.size.height+b.size.height/2+n.margin.top+e.options.margin});break;case"br":e.bubble.css({left:i.left+n.size.width/2-s.border.width-b.position.left-b.size.width/2+n.margin.left,top:i.top+n.size.height+b.size.height/2+n.margin.top+e.options.margin})}return e},i.prototype.show=function(){return this.bubble.attr("data-active",!0),this.options.ns&&t('.bubbles[data-bubble-ns="'+this.options.ns+'"]').addClass("bubbles-hide"),this.bubble.removeClass("bubbles-hide"),this},i.prototype.hide=function(){return this.bubble.removeAttr("data-active"),this.bubble.addClass("bubbles-hide"),this},t.fn[o]=function(e){var n,b,r,l;if("string"==typeof e){if(n=arguments,b=e,r=function(){for(var t=0;t<s.length;t++)if(s[t]===b)return!0;return!1},Array.prototype.shift.call(n),"check"==b)return!!this.data("plugin_"+o);if(r())return this.each(function(){var e=t(this).data("plugin_"+o);e&&e[b]&&e[b].apply(e,n)});if(l=this.first().data("plugin_"+o),l&&l[b])return l[b].apply(l,n);throw new TypeError(o+' has no method "'+b+'"')}return this.each(function(){var n=t(this).data("plugin_"+o);n||t(this).data("plugin_"+o,new i(this,e))})}}(jQuery,window);